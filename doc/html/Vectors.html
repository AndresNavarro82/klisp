<html lang="en">
<head>
<title>Vectors - klisp Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="klisp Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="Ports.html#Ports" title="Ports">
<link rel="next" href="Bytevectors.html#Bytevectors" title="Bytevectors">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<div class="node">
<a name="Vectors"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Bytevectors.html#Bytevectors">Bytevectors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Ports.html#Ports">Ports</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr>
</div>

<!-- node-name,  next,  previous,  up -->
<h2 class="chapter">18 Vectors</h2>

<p><a name="index-Vectors-349"></a>
A vector is an object that contains a sequence of arbitrary klisp
objects.  A vector has a length that is fixed at creation time, and as
many objects, indexed from <code>0</code> to <code>length-1</code>.  Compared to
lists, klisp vectors use less size and have constant access time for
any element.

   <p>Vectors may be mutable or immutable.  If an attempt is made to mutate
an immutable vector, an error is signaled.  Two immutable vectors are
&ldquo;eq?&rdquo; iff they are &ldquo;equal?&rdquo;.  Two mutable vectors are &ldquo;eq?&rdquo; if
they were created by the same constructor call.  Two mutable vectors
are &ldquo;equal?&rdquo; iff they have the same length and have &ldquo;equal?&rdquo;
objects in each position.  As is the case for lists, in order to
handle possibly cyclic structures, the &ldquo;equal?&rdquo; algorithm considers
vectors as FSMs where it position is a state change.  There is only one
empty vector (that is, a vector of length 0) and that vector is
immutable.  The vector type is encapsulated.

   <p>SOURCE NOTE: The report doesn't currently include vectors. They are
taken from r7rs scheme.

<div class="defun">
&mdash; Applicative: <b>vector?</b> (<var>vector? . objects</var>)<var><a name="index-vector_003f-350"></a></var><br>
<blockquote><p>The primitive type predicate for type vector.  <code>vector?</code>
returns true iff all the objects in <code>objects</code> are of type
vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>immutable-vector?</b> (<var>immutable-vector? objects</var>)<var><a name="index-immutable_002dvector_003f-351"></a></var><br>
&mdash; Applicative: <b>mutable-vector?</b> (<var>mutable-vector? objects</var>)<var><a name="index-mutable_002dvector_003f-352"></a></var><br>
<blockquote><p>The primitive type predicates for types immutable vector and mutable
vector.  These return true iff all the objects in <code>objects</code> are of
type immutable vector or mutable vector respectively. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>make-vector</b> (<var>make-vector k </var>[<var>obj</var>])<var><a name="index-make_002dvector-353"></a></var><br>
<blockquote><p>Applicative <code>make-vector</code> constructs and returns a new mutable
vector of length <code>k</code>.  If <code>obj</code> is specified, then all
objects in the returned vector are <code>obj</code>, otherwise the
content of the vector is unspecified. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-length</b> (<var>vector-length vector</var>)<var><a name="index-vector_002dlength-354"></a></var><br>
<blockquote><p>Applicative <code>vector-length</code> returns the length of
<code>vector</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-ref</b> (<var>vector-ref vector k</var>)<var><a name="index-vector_002dref-355"></a></var><br>
<blockquote><p>Applicative <code>vector-ref</code> returns the object of <code>vector</code> at
position <code>k</code>.  If <code>k</code> is out of bounds (i.e. less than
<code>0</code> or greater or equal than <code>(vector-length vector)</code>) an
error is signaled. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-set!</b> (<var>vector-set! vector k obj</var>)<var><a name="index-vector_002dset_0021-356"></a></var><br>
<blockquote><p>Applicative <code>vector-set!</code> replaces the object with index <code>k</code>
in <code>vector</code> with object <code>obj</code>.  If <code>k</code> is out of
bounds, or <code>vector</code> is immutable, an error is signaled. The
result returned by <code>vector-set!</code> is inert. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector</b> (<var>vector . objs</var>)<var><a name="index-vector-357"></a></var><br>
<blockquote><p>Applicative <code>vector</code> contructs and return a new mutable vector
composed of the object arguments. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-&gt;list</b> (<var>vector-&gt;list vector</var>)<var><a name="index-vector_002d_003elist-358"></a></var><br>
&mdash; Applicative: <b>list-&gt;vector</b> (<var>list-&gt;vector objs</var>)<var><a name="index-list_002d_003evector-359"></a></var><br>
<blockquote><p>These applicatives convert between vectors and lists.  The objects
returned by these applicatives are always mutable. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-copy</b> (<var>vector-copy vector</var>)<var><a name="index-vector_002dcopy-360"></a></var><br>
<blockquote><p>Applicative <code>vector-copy</code> constructs and returns a new mutable
vector with the same length and objects as <code>vector</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-&gt;bytevector</b> (<var>vector-&gt;bytevector vector</var>)<var><a name="index-vector_002d_003ebytevector-361"></a></var><br>
&mdash; Applicative: <b>bytevector-&gt;vector</b> (<var>bytevector-&gt;vector bytevector</var>)<var><a name="index-bytevector_002d_003evector-362"></a></var><br>
<blockquote><p>These applicatives convert between vectors and bytevectors.  If a
vector containing objects other than exact integers between 0 and 255
inclusive are passed to <code>vector-&gt;bytevector</code>, an error is
signaled.  The objects returned by these applicatives are always
mutable. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-&gt;string</b> (<var>vector-&gt;string vector</var>)<var><a name="index-vector_002d_003estring-363"></a></var><br>
&mdash; Applicative: <b>string-&gt;vector</b> (<var>string-&gt;vector string</var>)<var><a name="index-string_002d_003evector-364"></a></var><br>
<blockquote><p>These applicatives convert between vectors and strings.  If a vector
containing objects other than characters is passed to
<code>vector-&gt;string</code>, an error is signaled.  The objects returned by
these applicatives are always mutable. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-copy!</b> (<var>vector-copy! vector1 vector2</var>)<var><a name="index-vector_002dcopy_0021-365"></a></var><br>
<blockquote><p>vector2 should have a length greater than or equal to
that of vector1.

        <p>Copies the values in vector1 to the corresponding positions in
vector2.  If vector2 is immutable, an error is signaled.  The result
returned by <code>vector-copy!</code> is inert. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-copy-partial</b> (<var>vector-copy-partial vector k1 k2</var>)<var><a name="index-vector_002dcopy_002dpartial-366"></a></var><br>
<blockquote><p>Both <code>k1</code> &amp; <code>k2</code> should be valid indexes in
<code>vector</code>.  Also it should be the case that <code>k1 &lt;= k2</code>.

        <p>Applicative <code>vector-copy-partial</code> constructs and returns a new
mutable vector with length <code>k2 - k1</code>, with the objects from
<code>vector</code>, starting at index <code>k1</code> (inclusive) and ending at
index <code>k2</code> (exclusive). 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-copy-partial!</b> (<var>vector-copy-partial! vector1 k1 k2 vector2 k3</var>)<var><a name="index-vector_002dcopy_002dpartial_0021-367"></a></var><br>
<blockquote><p>Both <code>k1</code> &amp; <code>k2-1</code> should be valid indexes in
<code>vector1</code>.  Also it should be the case that <code>k1 &lt;= k2</code>. 
Both <code>k3</code> &amp; <code>k3 + (k2-k1) - 1</code> should be valid indexes in
<code>vector2</code>.

        <p>Applicative <code>vector-copy-partial!</code> copies objects k1 (inclusive)
through k2 (exclusive) from <code>vector1</code> to the <code>k2-k1</code>
positions in <code>vector2</code> starting at <code>k3</code>.  If <code>vector2</code>
is an immutable vector, an error is signaled.  The result returned by
<code>vector-copy-partial!</code> is inert. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-fill!</b> (<var>vector-fill! vector obj</var>)<var><a name="index-vector_002dfill_0021-368"></a></var><br>
<blockquote><p>Applicative <code>vector-fill!</code> replaces all the objects in
<code>vector</code> with object <code>obj</code>.  If <code>vector</code> is an
immutable vector, an error is signaled.  The result
returned by <code>vector-fill!</code> is inert. 
</p></blockquote></div>

<div class="defun">
&mdash; Applicative: <b>vector-&gt;immutable-vector</b> (<var>vector-&gt;immutable-vector vector</var>)<var><a name="index-vector_002d_003eimmutable_002dvector-369"></a></var><br>
<blockquote><p>Applicative <code>vector-&gt;immutable-vector</code> constructs and returns a
new immutable vector with the same length and objects as
<code>vector</code>. 
</p></blockquote></div>

<!-- *-texinfo-*- -->
   </body></html>

